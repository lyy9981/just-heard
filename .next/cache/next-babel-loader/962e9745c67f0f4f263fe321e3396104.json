{"ast":null,"code":"var _jsxFileName = \"/Users/yiyi/projects/just-heard/pages/index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport App from '../components/App';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { withApollo } from '../lib/apollo';\nimport { getCookie } from '../utils/cookie';\nimport { getCity } from '../utils/locale';\nimport { BRAND_NAME, COOKIE_NAMES } from '../site';\nimport { useCountryCities } from '../hooks/queries';\nimport CountryCities from '../components/CountryCities';\nimport Logo from '../components/Logo';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: `100vh`\n  }\n}));\n\nconst SelectCity = () => {\n  const classes = useStyles();\n  return __jsx(App, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, BRAND_NAME)), __jsx(Grid, {\n    container: true,\n    spacing: 0,\n    justify: \"center\",\n    alignItems: \"center\",\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 10,\n    md: 4,\n    lg: 3,\n    xl: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, __jsx(Box, {\n    mb: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }\n  }, __jsx(Logo, {\n    hasCityName: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  })), __jsx(Box, {\n    mb: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, \"Select your city\")), __jsx(Paper, {\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, __jsx(CountryCities, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  })))));\n};\n\nconst IndexPage = () => {\n  const {\n    push\n  } = useRouter();\n  const {\n    data\n  } = useCountryCities();\n\n  if (false) {\n    const citySlug = getCookie(COOKIE_NAMES.CITY);\n    const city = getCity(citySlug, data);\n\n    if (citySlug && city) {\n      push('/[slug]', `/${citySlug}`);\n    } else {\n      return __jsx(SelectCity, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }, BRAND_NAME));\n  }\n\n  return __jsx(SelectCity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 10\n    }\n  });\n};\n\nexport default withApollo({\n  ssr: true\n})(IndexPage);","map":{"version":3,"names":["React","Head","useRouter","App","makeStyles","Grid","Box","Typography","Paper","withApollo","getCookie","getCity","BRAND_NAME","COOKIE_NAMES","useCountryCities","CountryCities","Logo","useStyles","theme","root","height","SelectCity","classes","IndexPage","push","data","citySlug","CITY","city","ssr"],"sources":["/Users/yiyi/projects/just-heard/pages/index.js"],"sourcesContent":["import React from 'react'\nimport Head from 'next/head'\nimport { useRouter } from 'next/router'\nimport App from '../components/App'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\nimport { withApollo } from '../lib/apollo'\nimport { getCookie } from '../utils/cookie'\nimport { getCity } from '../utils/locale'\nimport { BRAND_NAME, COOKIE_NAMES } from '../site'\nimport { useCountryCities } from '../hooks/queries'\nimport CountryCities from '../components/CountryCities'\nimport Logo from '../components/Logo'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: `100vh`\n  },\n}))\n\nconst SelectCity = () => {\n  const classes = useStyles()\n\n  return (\n    <App>\n      <Head>\n        <title>{ BRAND_NAME }</title>\n      </Head>\n      <Grid container spacing={0} justify=\"center\" alignItems=\"center\" className={classes.root}>\n        <Grid item xs={10} md={4} lg={3} xl={2}>\n          <Box mb={4}>\n            <Logo hasCityName={false} />\n          </Box>\n          <Box mb={2}>\n            <Typography variant=\"h5\">\n              Select your city\n            </Typography>\n          </Box>\n          <Paper variant=\"outlined\">\n            <CountryCities />\n          </Paper>\n        </Grid>\n      </Grid>\n    </App>\n  )\n}\n\nconst IndexPage = () => {\n  const { push } = useRouter()\n  const { data } = useCountryCities()\n\n  if (typeof window !== 'undefined') {\n    const citySlug = getCookie(COOKIE_NAMES.CITY)\n    const city = getCity(citySlug, data)\n\n    if (citySlug && city) {\n      push('/[slug]', `/${citySlug}`)\n    } else {\n      return <SelectCity />\n    }\n\n    return (\n      <Head>\n        <title>{ BRAND_NAME }</title>\n      </Head>\n    )\n  }\n\n  return <SelectCity />\n}\n\n\nexport default withApollo({ ssr: true })(IndexPage)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}